<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestionale Manutenzione HVAC - Polo Tecnico</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link href='https://cdn.jsdelivr.net/npm/fullcalendar@5.10.2/main.min.css' rel='stylesheet' />
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://unpkg.com/dexie@latest/dist/dexie.js"></script>
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.10.2/main.min.js'></script>
</head>
<body class="bg-gray-100 transition-colors duration-200">
    <div id="app" class="container mx-auto p-4">
        <header class="flex items-center justify-between mb-8 bg-white p-4 rounded-lg shadow-md">
            <div class="flex items-center">
                <img src="logo polo tecnico.png" alt="Polo Tecnico Logo" class="w-16 h-16 mr-4">
                <div>
                    <h1 class="text-2xl font-bold text-blue-600">Polo Tecnico</h1>
                    <p class="text-sm text-gray-600">HEATING, COOLING, ACCOUNTING, CONSTRUCTION</p>
                </div>
            </div>
            <div>
                <button id="themeToggle" class="p-2 bg-gray-200 rounded">
                    <i class="fas fa-moon"></i>
                </button>
                <button id="userMenu" class="ml-2 p-2 bg-gray-200 rounded">
                    <i class="fas fa-user"></i>
                </button>
            </div>
        </header>

        <nav class="mb-4 bg-white p-4 rounded-lg shadow-md flex flex-wrap">
            <button id="btnDashboard" class="mr-2 mb-2 p-2 bg-blue-500 text-white rounded">
                <i class="fas fa-tachometer-alt mr-2"></i>Dashboard
            </button>
            <button id="btnNuovoIntervento" class="mr-2 mb-2 p-2 bg-gray-200 rounded">
                <i class="fas fa-plus-circle mr-2"></i>Nuovo Intervento
            </button>
            <button id="btnListaInterventi" class="mr-2 mb-2 p-2 bg-gray-200 rounded">
                <i class="fas fa-list mr-2"></i>Lista Interventi
            </button>
            <button id="btnGestioneMateriali" class="mr-2 mb-2 p-2 bg-gray-200 rounded">
                <i class="fas fa-boxes mr-2"></i>Gestione Materiali
            </button>
            <button id="btnReportFinanziario" class="mr-2 mb-2 p-2 bg-gray-200 rounded">
                <i class="fas fa-chart-line mr-2"></i>Report Finanziario
            </button>
            <button id="btnGestioneClienti" class="mr-2 mb-2 p-2 bg-gray-200 rounded">
                <i class="fas fa-users mr-2"></i>Gestione Clienti
            </button>
            <button id="btnPianificazioneInterventi" class="mr-2 mb-2 p-2 bg-gray-200 rounded">
                <i class="fas fa-calendar-alt mr-2"></i>Pianificazione Interventi
            </button>
            <button id="btnFatturazione" class="mr-2 mb-2 p-2 bg-gray-200 rounded">
                <i class="fas fa-file-invoice-dollar mr-2"></i>Fatturazione
            </button>
            <button id="btnImpianti" class="mr-2 mb-2 p-2 bg-gray-200 rounded">
                <i class="fas fa-industry mr-2"></i>Impianti
            </button>
            <button id="btnCommesse" class="mr-2 mb-2 p-2 bg-gray-200 rounded">
                <i class="fas fa-tasks mr-2"></i>Commesse
            </button>
            <button id="btnCalendario" class="mr-2 mb-2 p-2 bg-gray-200 rounded">
                <i class="fas fa-calendar-alt mr-2"></i>Calendario
            </button>
            <button id="btnNotifiche" class="mr-2 mb-2 p-2 bg-gray-200 rounded relative">
                <i class="fas fa-bell mr-2"></i>Notifiche
                <span id="notificationBadge" class="absolute top-0 right-0 bg-red-500 text-white rounded-full px-2 py-1 text-xs hidden">0</span>
            </button>
        </nav>

        <div id="searchAndFilter" class="mb-4 bg-white p-4 rounded-lg shadow-md">
            <div class="flex flex-wrap items-center mb-2">
                <div class="w-full md:w-1/2 lg:w-1/3 pr-2 mb-2 md:mb-0">
                    <div class="relative">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                        <input type="text" id="searchInput" placeholder="Cerca..." class="w-full p-2 pl-10 border rounded">
                    </div>
                </div>
                <div class="w-full md:w-1/2 lg:w-1/3 pr-2 mb-2 md:mb-0">
                    <select id="filterType" class="w-full p-2 border rounded">
                        <option value="">Tipo di intervento</option>
                    </select>
                </div>
                <div class="w-full md:w-1/2 lg:w-1/3">
                    <div class="relative">
                        <i class="fas fa-calendar absolute left-3 top-3 text-gray-400"></i>
                        <input type="text" id="filterDateRange" class="w-full p-2 pl-10 border rounded" placeholder="Intervallo date">
                    </div>
                </div>
            </div>
            <div class="flex justify-end">
                <button id="applyFilters" class="p-2 bg-blue-500 text-white rounded mr-2">
                    <i class="fas fa-filter mr-2"></i>Applica Filtri
                </button>
                <button id="resetFilters" class="p-2 bg-gray-300 rounded">
                    <i class="fas fa-undo mr-2"></i>Resetta Filtri
                </button>
            </div>
        </div>

        <main id="mainContent" class="bg-white p-4 rounded-lg shadow-md">
            <!-- Il contenuto dinamico sarà inserito qui -->
        </main>

        <div id="pagination" class="mt-4 flex justify-center">
            <!-- I controlli di paginazione saranno inseriti qui -->
        </div>

        <footer class="mt-8 text-center text-gray-600">
            <p>&copy; 2024 Polo Tecnico. Tutti i diritti riservati.</p>
        </footer>
    </div>

    <!-- Modals -->
    <div id="errorModal" class="modal hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full">
        <div class="modal-content relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <h3 class="text-lg font-bold mb-2 text-red-600">
                <i class="fas fa-exclamation-circle mr-2"></i>Errore
            </h3>
            <p id="errorMessage"></p>
            <button id="closeErrorModal" class="mt-3 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600">
                <i class="fas fa-times mr-2"></i>Chiudi
            </button>
        </div>
    </div>

    <div id="successModal" class="modal hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full">
        <div class="modal-content relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <h3 class="text-lg font-bold mb-2 text-green-600">
                <i class="fas fa-check-circle mr-2"></i>Successo
            </h3>
            <p id="successMessage"></p>
            <button id="closeSuccessModal" class="mt-3 px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600">
                <i class="fas fa-times mr-2"></i>Chiudi
            </button>
        </div>
    </div>

    <div id="confirmModal" class="modal hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full">
        <div class="modal-content relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <h3 class="text-lg font-bold mb-2">
                <i class="fas fa-question-circle mr-2"></i>Conferma
            </h3>
            <p id="confirmMessage"></p>
            <div class="mt-3 flex justify-end space-x-2">
                <button id="confirmYes" class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600">
                    <i class="fas fa-check mr-2"></i>Sì
                </button>
                <button id="confirmNo" class="px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">
                    <i class="fas fa-times mr-2"></i>No
                </button>
            </div>
        </div>
    </div>

    <div id="addLabelModal" class="modal hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full">
        <div class="modal-content relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <h3 class="text-lg font-bold mb-2">
                <i class="fas fa-tag mr-2"></i>Aggiungi Etichetta
            </h3>
            <input type="text" id="newLabelInput" class="w-full p-2 border rounded mb-2" placeholder="Nome etichetta">
            <div class="flex justify-end">
                <button id="saveLabelBtn" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 mr-2">
                    <i class="fas fa-save mr-2"></i>Salva
                </button>
                <button id="closeLabelModal" class="px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">
                    <i class="fas fa-times mr-2"></i>Annulla
                </button>
            </div>
        </div>
    </div>

    <div id="addRecurringMaintenanceModal" class="modal hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full">
        <div class="modal-content relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <h3 class="text-lg font-bold mb-2">
                <i class="fas fa-redo mr-2"></i>Aggiungi Manutenzione Ricorrente
            </h3>
            <select id="clienteRecurring" class="w-full p-2 border rounded mb-2">
                <option value="">Seleziona Cliente</option>
                <!-- Opzioni dei clienti verranno popolate dinamicamente -->
            </select>
            <input type="text" id="tipoManutenzione" class="w-full p-2 border rounded mb-2" placeholder="Tipo di manutenzione">
            <select id="frequenzaManutenzione" class="w-full p-2 border rounded mb-2">
                <option value="">Seleziona Frequenza</option>
                <option value="settimanale">Settimanale</option>
                <option value="mensile">Mensile</option>
                <option value="trimestrale">Trimestrale</option>
                <option value="semestrale">Semestrale</option>
                <option value="annuale">Annuale</option>
            </select>
            <div class="flex justify-end">
                <button id="saveRecurringBtn" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 mr-2">
                    <i class="fas fa-save mr-2"></i>Salva
                </button>
                <button id="closeRecurringModal" class="px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">
                    <i class="fas fa-times mr-2"></i>Annulla
                </button>
            </div>
        </div>
    </div>

    <div id="eventDetailsModal" class="modal hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full">
        <div class="modal-content relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <h3 class="text-lg font-bold mb-2">Dettagli Evento</h3>
            <div id="eventDetailsContent"></div>
            <button id="closeEventDetailsModal" class="mt-3 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
                <i class="fas fa-times mr-2"></i>Chiudi
            </button>
        </div>
    </div>

    <div id="newEventModal" class="modal hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full">
        <div class="modal-content relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <h3 class="text-lg font-bold mb-2">Nuovo Intervento Pianificato</h3>
            <form id="newEventForm" class="space-y-2">
                <select id="newEventCliente" class="w-full p-2 border rounded" required>
                    <option value="">Seleziona Cliente</option>
                    <!-- Opzioni dei clienti verranno popolate dinamicamente -->
                </select>
                <input type="text" id="newEventTipo" class="w-full p-2 border rounded" placeholder="Tipo di intervento" required>
                <textarea id="newEventNote" class="w-full p-2 border rounded" placeholder="Note"></textarea>
                <input type="hidden" id="newEventDate">
                <div class="flex justify-end mt-3">
                    <button type="submit" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 mr-2">
                        <i class="fas fa-save mr-2"></i>Salva
                    </button>
                    <button type="button" id="closeNewEventModal" class="px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">
                        <i class="fas fa-times mr-2"></i>Annulla
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Scripts -->
    <script src="app.js"></script>
</body>
</html>